<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="account">
	<resultMap type="account" id="accountResult">
		<result property="id" 				column="id"/>
		<result property="account" 			column="account"/>
		<result property="password" 		column="password"/>
		<result property="type" 			column="type"/>
		<result property="resourceId" 		column="resource_id"/>
		<result property="serverType" 		column="server_type"/>
	</resultMap>
	<select id="query" parameterType="int" resultMap="accountResult">
		<![CDATA[
			SELECT
			  `id`,
			  `account`,
			  `password`,
			  `type`,
			  `resource_id`,
			  `server_type`
			FROM `account` WHERE `resource_id` = #{resourceId}
		]]>
	</select>
	<insert id="insert" parameterType="account">
		<![CDATA[
			INSERT INTO `account`
            (`account`,
             `password`,
             `type`,
             `resource_id`,
			 `server_type`)
			VALUES (#{account},
			        #{password},
			        #{type},
			        #{resourceId},
			        #{serverType})
		]]>
		<selectKey keyProperty="id" resultType="java.lang.Integer">
			<![CDATA[
				SELECT @@IDENTITY AS id
			]]>
		</selectKey>
	</insert>
	<update id="update" parameterType="account">
		<![CDATA[
			UPDATE `account`
			SET
			  `account` = #{account},
			  `password` = #{password},
			  `type` = #{type}
			WHERE `id` = #{id}
		]]>
	</update>
	<delete id="delete" parameterType="int">
		<![CDATA[
			DELETE FROM `account` WHERE `id` = #{id}
		]]>
	</delete>
</mapper>